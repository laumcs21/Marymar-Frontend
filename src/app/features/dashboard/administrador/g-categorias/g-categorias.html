<section class="flex-1 p-10 overflow-y-auto">

  <div class="max-w-6xl mx-auto">
  <!-- HEADER -->
  <div class="mb-10 flex justify-between items-start">
    <div>
      <h1 class="text-3xl font-bold text-primary">
        Gestión de Categorías
      </h1>
      <p class="text-slate-500 mt-2">
        Administra la estructura de clasificación de productos
      </p>
    </div>

    <button
      (click)="abrirModal()"
      class="bg-accent hover:bg-accent/90 text-white font-bold py-2.5 px-6 rounded-lg flex items-center gap-2 shadow-lg shadow-accent/20">
      <span class="material-symbols-outlined text-base">add</span>
      <span>Nueva Categoría</span>
    </button>
  </div>

  <!-- TABLA -->
    <div class="bg-white rounded-xl border shadow-sm mt-6">

    <div class="overflow-x-auto">
    <table class="w-full text-left border-collapse">

      <thead >
        <tr class="border-b">
          <th class="px-6 py-4 font-bold">ID</th>
          <th class="px-6 py-4 font-bold">Nombre</th>
          <th class="px-6 py-4 font-bold text-center">
            Productos
          </th>
          <th class="px-6 py-4 font-bold text-right">
            Acciones
          </th>
        </tr>
      </thead>

      <tbody class="divide-y">

        <tr *ngFor="let cat of categorias" class="hover:bg-slate-50">

          <td class="px-6 py-5 text-sm text-slate-500">
              #CAT-{{ cat.id }}
          </td>

          <td class="px-6 py-5">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-primary">
                <span class="material-symbols-outlined">
                category
                </span>
              </div>
              <span class="font-semibold">
                {{ cat.nombre }}
              </span>
            </div>
          </td>

          <td class="px-6 py-5 text-center">
            <span class="px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-bold">
              {{ cat.cantidadProductos }} productos
            </span>
          </td>

          <td class="px-6 py-5 text-right">
            <div class="flex justify-end gap-3">

              <button
                (click)="editarCategoria(cat)"
                class="text-blue-600 hover:text-blue-800 transition-colors"
                title="Editar">
                <span class="material-symbols-outlined">edit</span>
              </button>

              <button
                (click)="eliminar(cat.id)"
                class="text-red-600 hover:text-red-800 transition-colors"
                title="Eliminar">
                <span class="material-symbols-outlined">delete</span>
              </button>

            </div>
          </td>

        </tr>

      </tbody>
    </table>
    </div>

  </div>

</div>

<!-- MODAL -->
<div *ngIf="mostrarModal"
     class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm">

  <div class="bg-white dark:bg-slate-900 w-full max-w-md rounded-xl shadow-2xl border border-slate-200 dark:border-slate-800 overflow-hidden">

    <!-- HEADER -->
    <div class="px-6 py-5 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center">
      <h3 class="text-xl font-bold text-primary dark:text-slate-100">
        {{ modoEdicion ? 'Editar Categoría' : 'Nueva Categoría' }}
      </h3>

      <button (click)="cerrarModal()"
              class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition">
        <span class="material-symbols-outlined">close</span>
      </button>
    </div>

    <!-- BODY -->
    <div class="p-6">

      <form [formGroup]="form" (ngSubmit)="guardar()" class="space-y-5">

        <div>
          <label class="block text-sm font-bold text-primary dark:text-slate-300 mb-2">
            Nombre de la Categoría
          </label>

          <input
            formControlName="nombre"
            class="w-full h-12 px-4 rounded-lg border border-slate-200 dark:border-slate-700 
                   bg-white dark:bg-slate-800 
                   text-slate-900 dark:text-slate-100
                   focus:ring-2 focus:ring-primary/20 focus:border-primary 
                   outline-none transition-all
                   placeholder:text-slate-400"
            placeholder="Ej. Mariscos Frescos"
            type="text" />
        </div>

        <!-- INFO BOX -->
        <div class="bg-primary/5 dark:bg-primary/20 p-4 rounded-lg flex items-start gap-3">
          <span class="material-symbols-outlined text-primary dark:text-accent">
            info
          </span>
          <p class="text-xs text-slate-600 dark:text-slate-400 leading-relaxed">
            El nombre será visible para los clientes en el menú digital.
          </p>
        </div>

        <!-- FOOTER -->
        <div class="pt-4 flex flex-col-reverse sm:flex-row justify-end gap-3">

          <button type="button"
                  (click)="cerrarModal()"
                  class="px-6 py-2.5 rounded-lg text-sm font-bold 
                         text-slate-600 dark:text-slate-300
                         hover:bg-slate-200 dark:hover:bg-slate-700 
                         transition-colors">
            Cancelar
          </button>

          <button type="submit"
                  class="px-6 py-2.5 rounded-lg text-sm font-bold 
                         bg-primary text-white 
                         hover:bg-primary/90 
                         shadow-md shadow-primary/20 
                         transition-all flex items-center justify-center gap-2">

            <span class="material-symbols-outlined text-sm">save</span>
            Guardar Categoría
          </button>

        </div>

      </form>

    </div>

  </div>
</div>
</section>